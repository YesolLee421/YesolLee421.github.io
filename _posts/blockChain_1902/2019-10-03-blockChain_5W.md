---
title: "[블록체인] 5주차_블록체인과 소유권"
categories:
  - BlockChain
  - 블록체인
comments : true
---
*이 내용은 K-MOOC [알기쉬운블록체인] 강의를 듣고 정리한 내용입니다.*
<br>

[알기쉬운블록체인]: http://www.kmooc.kr/courses/course-v1:SJCU+SJCU01+2019_2/courseware/145ba5714d1246c1b65fe1b081d52db0/e1af1659e74343579fe5727acdfcfbc7/?child=last


# P2P 시스템과 블록체인
## 이중사용의 문제
### 1. 지폐 위조에 대한 안전장치
- 위조 불가능하도록 고유일련번호 사용
- 위조하기 어렵도록 형광섬유, 워터마크 등 사용<br>

### 화폐나 물품이 디지털화되어 원장의 분산 P2P 시스템에 관리된다면?: 화폐의 이중사용 문제(Double Spending)
- 예시) 부동산의 소유권을 관리하는 P2P 시스템
- 부동산 소유권이 변경되면 시스템의 모든 노드들이 가진 개별 원장 전부를 최신 버전으로 갱신해야 한다.
- 하지만 굉장히 큰 시스템에서 모든 노드들의 정보를 네트워크 상에서 갱신하는 데에 많은 시간이 걸린다.
- 모든 노드 정보가 동시에 갱신되지 않고 시간차가 있음 = 시스템의 마지막 피어까지 최신 복사본 가질 때까지 시스템이 일관성 상실
- 이를 이용해 아직 소유권 변경이 전부 갱신되지 않았을 때 기존 데이터로 새로운 소유권 변경을 만듦 -> 부동산 하나를 B, C 둘에게 판매하는 효과<br>

### 이중사용 문제의 세 가지 유형
1. 디지털 재화를 복사해 발생하는 문제
    - 디지털 재화를 복제하여 동일한 돈 반복해서 사용
    - 복사기를 사용해 실물화폐를 복사하는 것과 유사<br>
2. 원장의 분산 P2P 시스템에서 발생하는 문제
    - 시스템의 모든 피어가 정보를 전달받기까지 발생하는 시간차로 인해 일부 피어가 상이한 소유권을 가지는 현상
    - 먼저 최신 정보를 획득한 피어가 소유권을 한 번 이상 이전할 가능성이 발생하고 결국 이중사용 문제 초래<br>
3. 분산 P2P 시스템 무결성 침해 사례
    - P2P시스템의 데이터 일관성은 시스템 무결성의 한 측면
    - 이중사용 문제는 시스템 무결성이 침해된 특정 사례<br>

## 이중사용 문제 해결 방법
### 1. '디지털 재화 복사'하는 이중지불 문제 해결
- 소유권의 본질과 연관된 문제
- 어떤 형태로 구현되어 있는지와 상관없이 디지털 재화를 나타내는 데이터와 소유자를 매핑(mapping)할 수 있는 수단만 있으면 해결 가능
- 매핑 결과를 증명해주는 시스템: 중앙 통제된 실물 책자 혹은 P2P 등의 구조와 상관없는 원장의 올바른 동작<br>


### 2. 원장 분산 P2P 시스템에서 발생하는 이중사용 문제 해결 방법
- `원광관리`: 특수 응용 분야 존재
- 블록체인 기술 묶음 활용
    - 어떤 정보를 분산 시스템 내의 모든 사람에게 한정되서 보내는 것이 아니라 정보를 뿌려주는 브로드캐스팅 네트워크 기법
    - 트랜잭션 검증할 수 있는 규칙 등
    - 원장의 분산 P2P 시스템 = 블록체인 구조: 따라서 블록체인 기술묶음을 사용하면 자연스럽게 문제 해결됨<br>

### 3. P2P 시스템의 무결성이 침해된 이중사용 문제 해결
- 응용 분야가 특정되어 있지 않음 (블록체인만이 아니라)
- 시스템의 구체적 용도와 관계 없이 시스템의 무결성을 확보하면 문제 해결
- 해당 시스템의 응용 분야에 따라 블록체인이 아닌 더 적합한 데이터구조나 알고리즘을 통해 무결성 확보, 유지 가능<br>

### '이중사용' 문제의 정의
- 원장의 순수 분산 P2P 시스템에서 발생할 수 있는 취약성
- 원장의 순수 분산 P2P 시스템의 **무결성을 침해**하는 중요한 예시
- 이를 해결하기 위한 도구 = 블록체인 기술묶음


# 블록체인에서의 소유권
## 소유권을 관리하는 블록체인 개발하기
### 1. 블록체인을 처음 만들 때의 고민: 블록체인 구성 과정 이해
1. 목표: 완전히 개방된 환경에서 잘 동작하는 원장의 순수 분산 P2P 시스템에서 소유권을 관리하는 소프트웨어의 디자인 / 특히 디지털화폐의 소유권 관리

2. 블록체인 개발을 위한 시스템 주요 고려사항
    1. 시스템은 순수 분산 P2P 시스템이고, 각각의 사용자가 기여한 계산 자원으로 이루어진다.
    2. 시스템의 각 피어, 즉 개별 노드들은 `인터넷`을 통해 서로 연결되어있다.
    3. 전체 시스템의 노드 개수 및 각 노드의 안전성, 신뢰성을 알 수 없다.
    4. 순수 분산 P2P 시스템 특징: 노드들이 참여를 해도 이 시스템에 참여하고 있는 다른 노드들의 정보를 아무것도 얻을 수 없다.<br>


## 블록체인 개발을 위한 일곱 가지 과제
1. 소유권 기술(Description)
2. 소유권 보호
3. 트랜잭션 데이터 저장
4. 신뢰할 수 없는 환경에 배분할 원장 준비
5. 원장 배분
6. 원장에 새 트랜잭션 추가
7. 어느 원장이 진실인지 판단하는 것<br>

### 1. 소유권 기술(Description)
- 블록체인 개발의 목적은? *소유권을 관리하는 소프트웨어 시스템 디자인*
- 따라서 소유권을 어떻게 기술(descript)할 것인지 먼저 결정해야 한다.
- transaction(트랜잭션): 거래 (내역, 기록)
- 트랜잭션의 전체 이력을 통해 현 소유자 및 과거 소유자까지 확인 가능<br>

### 2. 소유권 보호
- 타인이 다른 사람의 자산에 함부러 접근하지 못하도록 보호하는 장치: 암호화기술 등 보안 알고리즘 사용
- 소유권 보호과정 3단계
    1. 소유주 식별
    2. 소유주 인증
    3. 소유주 승인: 본인만 자산에 접근 가능
- `해시함수`: `일방향성`의 특징이 있는 특별한 형태의 함수
    - x가 있을 때 그 x에 대응되는 f(x)를 만들어낸다. 그런데 x를 알고 있으면 f(x)를 쉽게 계산할 수 잉ㅆ지만, f(x)만 알고있는데 그거로부터 x를 알아내는 건 매우 어려운 일방향적 특징<br>

### 3. 트랜잭션 데이터의 저장
- 트랜잭션 이력은 소유권을 명확히 하는 핵심요소이기 때문에 안전하게 저장해야 한다.
- 데이터 저장에 영향을 주는 요소는 보통 데이터구조: 블록체인에서는 블록체인 데이터구조가 디지털 원장으로 사용됨<br>


### 4.신뢰할 수 없는 환경에 배분할 원장 준비
- 개발 목표: `신뢰할 수 없는`, `분산 환경`에서 동작하는 원장의 P2P 시스템 디자인
- 전체 원장을 조정, 통제하는 중앙 통제 노드 없음 -> 신뢰할 수 없는 각 노드들에 원장의 제어를 맡겨야 한다.
- 따라서 각 노드들이 악의적인 목적을 가지고 원장 위조하는 행위에 대한 방지책 필요
- 블록체인 데이터구조는 바꿀 수 없게 + 동시에 새 트랜잭션은 기존 원장에 쉽게 추가할 수 있도록 승인할 수 있어야 한다.<br>


### 5. 원장 배분
- 그냥 추가전용 원장 하나 만들고 누구에게나 그 복사본을 주면? ( 안됨)
- 안 됨: 시스템 내 각 노드 간 상호작용이 어떻게, 어떤 정보를 어떠한 방식으로 주고 받는지, 네트워크 프로토콜, 알고리즘과 관련된 합의 내용 먼저 정해야 함.<br>


### 6. 원장에 새 트랜잭션 추가
- 블록체인 데이터구조: 개별적으로 추가만 할 수 있는 추가 전용 데이터구조
- 각 피어가 새로운 트랜잭션을 추가할 때 유효하고 승인된 트랜잭션만 추가 가능하도록 보장해야 함
- 해결: 구성원 모두가 새 데이터 추가 가능 + 각 구성원이 각 피어 감독하기
- 서로 감시, 감독하는 일하면 인센티브 제로<br>


### 7. 어느 원장이 진실인지 판단하기
- P2P 시스템에서 각 구성원이 개별 원장에 새 트랜잭션 추가하면, `네트워크` 속도 차이로 인해 어쩔 수 없이 각 피어들이 서로 다른 트랜잭션을 서로 다른 시간에 받을 가능성이 생긴다.
- 예시) A는 이미 물건 '집'의 소유권이 B에서 C로 넘어갔다는 사실을 아직 모르는데, B가 A에게 아직 집이 자기 것인 척 집을 팔았다. 이런 식으로 악용하는 것이 `이중지불` 문제이다.
- 어떤 이력을 선택할지 결정해 줄 중앙 통제장치가 없음 -> 모든 노드들이 독립적인 다수 의견을 따라 개별적으로 결정해서 해결해야 한다.
- 즉 각 노드들이 서로 다른 노드와 이야기 나누고 결정하는 것이 아니라, 독립적, 개별적 결정 필요.
